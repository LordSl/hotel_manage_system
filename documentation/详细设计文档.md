## 1.引言
### 1.1编制目的
   本文档描述了互联网酒店预订系统详细设计，达到指导后续软件构造的目的，同时实现和测试人员以及用户的沟通。


### 1.2词汇表

| 词汇名称 | 词汇含义 | 备注 |
| :------: | -------- | ---- |
|          |          |      |

### 1.3参考资料
1）IEEE标准
2）《软件工程与计算(卷二)软件开发的技术基础》


## 2.产品概述
   互联网酒店预订系统是***创业公司开发的业务系统，开发的目标是为客户提供通过互联网预订酒店的业务，包括浏览酒店信息，生成订单，补贴策略等。通过互联网酒店系统的应用，期望为客户提高预订酒店的便捷性与可靠性、逐步扩大客户群体及提高满意度、吸引更多酒店入驻、提高订单额与利润。

##3.结构视角

###3.1 业务逻辑层的分解
  业务逻辑层的开发包图如下：
  ![在这里插入图片描述](https://img-blog.csdnimg.cn/20200424161248610.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NzYxNTA3,size_16,color_FFFFFF,t_70)
  

####3.1.1 模块
 
  ######（1）各模块的职责和接口规范如下：
   ######模块的职责如下：
  |     模块   | 职责     |
  | :--------: | -------- |
  | adminbl   | 负责实现酒店管理人员界面所需要的服务 |
  | couponbl | 负责实现优惠策略界面所需要的服务|
  | hotelbl | 负责实现酒店及其房间信息界面所需要的服务|
  | orderbl |负责实现订单页面所需要的服务|
  | userbl |负责实现用户界面所需要的界面|
 
  ######各模块的接口规范如下：
 
  ##### Adminbl
  
 
  ###### 供接口
  
  | 接口名 | 语法         |
  | ------ | :----------- |
  |    AdminService.addManager   | 语法：public ResponseVO addManager(UserForm userForm)<br/> 前置条件：userForm的信息符合规范。<br/> 后置条件：数据库的酒店管理人员列表增加此用户，系统显示用户添加成功。 |
  |    AdminService.getAllManagers   | 语法：public List<User> getAllManagers();<br/> 前置条件：已创建酒店管理人员列表。<br/> 后置条件：返回酒店管理人员列表。 |
  
 
  ###### 需接口
 
  
  |         服务名         | 服务                   |
  | :--------------------: | ---------------------- |
  | AdminMapper.addManager(UserForm userForm) | 在酒店管理人员列表中插入持久化对象 |
  | AdminMapper.getAllManagers() | 返回所有酒店管理人员对象集成的列表 |
  | ResponseVO.buildSuccess(Object content) | 显示酒店管理人员是否添加成功 |
  
  ##### Couponbl
  

  ###### 供接口
  
  | 接口名 | 语法         |
  | ------ | :----------- |
  |    CouponService.getMatchOrderCoupon   | 语法：List<Coupon> getMatchOrderCoupon(OrderVO orderVO)<br/> 前置条件：传入的订单已被创建。<br/> 后置条件：返回与该订单所匹配的优惠策略。 |
  |    CouponService.getHotelAllCoupon   | 语法：List<Coupon> getHotelAllCoupon(Integer hotelId)<br/> 前置条件：该酒店已入驻本系统。 <br/> 后置条件：返回该酒店所有的优惠策略。 |
  |    CouponService.addHotelTargetMoneyCoupon   | 语法：CouponVO addHotelTargetMoneyCoupon(HotelTargetMoneyCouponVO couponVO)<br/> 前置条件：该优惠策略信息有效。 <br/> 后置条件：数据库中的优惠策略表添加此优惠策略。 |
 
  ###### 需接口
  
  |         服务名         | 服务                   |
  | :--------------------: | ---------------------- |
  | CouponMapper.selectByHotelId(Integer hotelId)|根据酒店id返回该酒店的优惠策略。 |
  | CouponMatchStrategy.isMCatch(OrderVO orderVO, Coupon coupon) | 返回订单值对象是否满足该优惠策略 |
  | CouponMapper.insertCoupon(Coupon coupon) | 在数据库中插入相应的优惠策略 |
  

  ##### Hotelbl
  
 
  ###### 供接口
  
  | 接口名 | 语法         |
  | ------ | :----------- |
  |    HotelService.addHotel   | 语法：publice void addHotel(HotelVO hotelVO) throws ServiceException<br/> 前置条件：该酒店的信息符合规范。<br/> 后置条件：数据库中添加一个入驻酒店。 |
  |    HotelService.updateRoomInfo   | 语法：public void updateRoomInfo(Integer hotelId, String roomType,Integer rooms)<br/> 前置条件：传入的酒店已入驻系统且房型与房间数符合规范。 <br/> 后置条件：该酒店的特定房型的数量得到更新。 |
  |    HotelService.retrieveHotels   | 语法：public List<HotelVO> retrieveHotels();<br/> 前置条件：开启一个检索酒店信息回合。 <br/> 后置条件：返回所有入驻酒店的值对象列表。 |
  |    HotelService.retrieveHotelDetails   | 语法：publice HotelVO retrieveHotelDetails(Integer hotelId);<br/> 前置条件：该酒店已入驻系统。<br/> 后置条件：返回特定酒店的值对象。 |
  |    HotelService.getRoomCurNum   | 语法：public int getRoomCurNum(Integer hotelId,String roomType)<br/> 前置条件：传入的酒店已入驻系统且房型符合规范。 <br/> 后置条件：返回该酒店的特定房型的数量。 |
  |    HotelService.getHotelOrders   | 语法：public List<Order> getHotelOrders(Integer hotelId)<br/> 前置条件：该酒店已入驻系统。 <br/> 后置条件：返回该酒店的订单列表。 |
  |    RoomService.retrieveHotelRoomInfo   | 语法：public List<HotelRoom> retrieveHotelRoomInfo(Integer hotelId)<br/> 前置条件：传入的酒店已入驻系统。 <br/> 后置条件：返回该酒店的房间信息列表。 |
  |    RoomService.insertRoomInfo   | 语法：public void insertRoomInfo(HotelRoom hotelRoom)<br/> 前置条件：酒店房间的信息符合规范。 <br/> 后置条件：数据库中添加此房型信息。 |
  |    RoomService.getRoomCurNum   | 语法：public int getRoomCurNum(Integer hotelId,String roomType)<br/> 前置条件：传入的酒店已入驻系统且房型符合规范。 <br/> 后置条件：返回该酒店的特定房型的数量。 |
  |    RoomService.updateRoomInfo   | 语法：public void updateRoomInfo(Integer hotelId, String roomType,Integer rooms)<br/> 前置条件：传入的酒店已入驻系统且房型与房间数符合规范。 <br/> 后置条件：该酒店的特定房型的数量得到更新。 |
 
  ###### 需接口
  
  
  |         服务名         | 服务                   |
  | :--------------------: | ---------------------- |
  | AccountService.getUserInfo(int id)|根据用户id返回用户的个人信息。 |
  | HotelMapper.insertHotel(Hotel hotel) | 数据库中插入此持久化对象 |
  | RoomService.updateRoomInfo(Integer hotelId, String roomType,Integer rooms) | 在数据库中更新此持久化对象的信息 |
  | RoomService.getRoomCurNum(Integer hotelId,String roomType) | 返回单一持久化对象的信息 |
  | HotelMapper.selectAllHotel()|返回酒店的值对象集成的列表 |
  | Hotel.selectById(@Param("id") Integer id) | 返回特定酒店的值对象|
  | Room.retrieveHotelRoomInfo(Integer hotelId) | 检索特定酒店的所有房型信息 |
  | OrderService.getAllOrders() | 返回订单持久化对象的列表 |
  | RoomMapper.updateRoomInfo(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType,@Param("curNum") Integer curNum)|更新单一持久化对象 |
  | RoomMapper.insertRoom(HotelRoom hotelRoom)|增加单一持久化对象 |
  | RoomMapper.selectRoomsByHotelId(@Param("hotelId") Integer hotelId)|返回酒店的值对象集成的列表 |
  | RoomMapper.getRoomCurNum(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType)|返回单一持久化对象的信息 |
  
  
  ##### Orderbl
  
  
  ###### 供接口
  
  
  | 接口名 | 语法         |
  | ------ | :----------- |
  |    OrderService.addOrder   | 语法：publice ResponseVO addOrder(OrderVO orderVO)<br/> 前置条件：订单的信息符合规范。<br/> 后置条件：增加一个订单值对象。 |
  |    OrderService.getAllOrders  | 语法：public List<Order> getAllOrders()<br/> 前置条件：开启一次检索所有订单回合。 <br/> 后置条件：返回所有订单值对象。 |
  |    OrderService.getUserOrders   | 语法：public List<Order> getUserOrders(int userid)<br/> 前置条件：用户id存在。 <br/> 后置条件：返回该特定用户的所有订单值对象。 |
  |    OrderService.annulOrder  | 语法：publice ResponseVO annulOrder(int orderid)<br/> 前置条件：该订单id存在且未被撤销。<br/> 后置条件：系统显示订单撤销成功。 |
  
  
  ###### 需接口
  
  
  |         服务名         | 服务                   |
  | :--------------------: | ---------------------- |
  | HotelService.getRoomCurNum(Integer hotelId,String roomType)|返回的单一持久化对象的信息 |
  | AccountService.getUserInfo(int id)|根据用户id返回用户的个人信息。 |
  | HotelService.updateRoomInfo(Integer hotelId, String roomType,Integer rooms) | 在数据库中更新此持久化对象的信息 |
  | OrderMapper.getAllOrders() | 返回所有订单持久化对象的列表 |
  | OrderMapper.getUserOrders(@Param("userid") int userid)|返回特定用户的所有订单信息 |
  | OrderMapper.annulOrder(@Param("orderid") int orderid) | 删除单一持久化对象 |
  
  ##### Userbl
  
  
  ###### 供接口
  
  | 接口名 | 语法         |
  | ------ | :----------- |
  |    AccountService.addOrder   | 语法：publice ResponseVO registerAccount(UserVO userVO)<br/> 前置条件：用户的信息符合规范。<br/> 后置条件：数据库中插入一个用户对象并显示注册成功。 |
  |    AccountService.login  | 语法：public User login(UserForm userForm)<br/> 前置条件：用户的登录信息正确。 <br/> 后置条件：登陆成功且用户信息被保存到session中。 |
  |    AccountService.getUserInfo   | 语法：public User getUserInfo(int id)<br/> 前置条件：用户id存在。 <br/> 后置条件：返回该特定用户值对象。 |
  |    AccountService.updateUserInfo  | 语法：publice RResponseVO updateUserInfo(int id, String password,String username,String phonenumber)<br/> 前置条件：所有用户信息符合规范。<br/> 后置条件：用户值对象信息得到更新并显示更新成功。 |
  
  
  ###### 需接口
  
  |         服务名         | 服务                   |
  | :--------------------: | ---------------------- |
  | AccountMapper.createNewAccount(User user)|数据库增加一个用户持久化对象 |
  | AccountMapper.getAccountByName(@Param("email") String email)|根据用户名返回用户持久化对象。 |
  | AccountMapper.getAccountById(@Param("id") int id) | 根据用户id返回用户持久化对象 |
  | AccountMapper.updateAccount(@Param("id") int id, @Param("password") String password,@Param("userName") String username, @Param("phoneNumber") String phonenumber); | 更新单一用户持久化对象 |

  ######（2）整体结构
  根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间我们添加了接口。
  
  
  ######（3）各模块的设计如下所示：
  ##### admin:
  ![](https://t1.picb.cc/uploads/2020/06/28/t4tuDw.png)
  
  #####coupon:
  ![](https://t1.picb.cc/uploads/2020/06/28/t4t1Tg.png)
  
  #####hotel:
  ![](https://t1.picb.cc/uploads/2020/06/28/t4tGtX.png)
  
  #####order:
  ![](https://t1.picb.cc/uploads/2020/06/28/t4tciR.png)
  
  #####user:
  ![](https://t1.picb.cc/uploads/2020/06/28/t4tmq8.png)
  
  ######（4）业务逻辑的动态模型：
  ######以下是客户预定房间的顺序图作为例子：
  ![](https://t1.picb.cc/uploads/2020/06/28/t4towg.png)
  
  
  
####4.依赖视角
####下图是客户端和服务端各自的包之间的依赖关系：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200424161248610.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NzYxNTA3,size_16,color_FFFFFF,t_70)
  
  
  
  
  
  