(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51af741d"],{4094:function(t,e,a){},"93b1":function(t,e,a){},c36c:function(t,e,a){"use strict";a("93b1")},c94c:function(t,e,a){"use strict";a("4094")},ca06:function(t,e,a){"use strict";a("cc6d")},cc6d:function(t,e,a){},e926:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manageHotel"},[a("a-layout",[a("a-layout-content",{attrs:{id:"htl"}},["HotelManager"==t.userInfo.userType?a("div",{staticClass:"manageHotel-HM"},[a("div",{staticClass:"hotel-info"},[a("a-card",{staticStyle:{width:"240px"}},[a("img",{staticStyle:{height:"300px"},attrs:{slot:"cover",alt:"example",src:t.currentHotelInfo.hotelImg,referrerPolicy:"no-referrer"},slot:"cover"})]),a("div",{staticClass:"info"},[a("div",{staticClass:"items"},[a("span",{staticClass:"label"},[t._v("酒店名称：")]),a("span",{staticClass:"value"},[t._v(t._s(t.currentHotelInfo.name))])]),a("div",{staticClass:"items"},[a("span",{staticClass:"label"},[t._v("地址")]),a("span",{staticClass:"value"},[t._v(t._s(t.currentHotelInfo.address))])]),a("div",{staticClass:"items"},[a("span",{staticClass:"label"},[t._v("评分:")]),a("span",{staticClass:"value"},[t._v(t._s(t.currentHotelInfo.rate))])]),a("div",{staticClass:"items"},[a("span",{staticClass:"label"},[t._v("星级:")]),a("a-rate",{staticStyle:{"font-size":"15px"},attrs:{value:t.currentHotelInfo.hotelStar,disabled:"",allowHalf:""}})],1),a("div",{staticClass:"items"},[a("span",{staticClass:"label"},[t._v("酒店简介:")]),a("span",{staticClass:"value"},[t._v(t._s(t.currentHotelInfo.description))])]),a("div",{staticStyle:{width:"100%","text-align":"right",margin:"20px 0"}},[a("a-upload",{attrs:{name:"file",multiple:!0,customRequest:t.customRequest_hotelImg,showUploadList:!1}},[a("a-button",{attrs:{type:"primary"}},[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传酒店封面 ")],1)],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateHotelHM()}}},[a("a-icon",{attrs:{type:"edit"}}),t._v(" 更新信息")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary"},on:{click:t.showMAtlas}},[a("a-icon",{attrs:{type:"edit"}}),t._v("更新酒店图册")],1)],1)])],1),a("a-divider"),a("a-tabs",[a("a-tab-pane",{key:"1",attrs:{tab:"房间信息"}},[a("div",{staticStyle:{width:"100%","text-align":"right",margin:"20px 0"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.addRoomHM()}}},[a("a-icon",{attrs:{type:"plus"}}),t._v("录入房间")],1),a("a-divider"),a("a-table",{attrs:{columns:t.columns4,dataSource:t.currentHotelInfo.rooms,pagination:!0},scopedSlots:t._u([{key:"roomImg",fn:function(e){return a("img",{staticStyle:{width:"150px",height:"100px"},attrs:{src:e},on:{click:function(a){return t.handleBrief(e)}}})}},{key:"action",fn:function(e){return a("span",{},[a("a-upload",{attrs:{name:"file",multiple:!0,customRequest:t.customRequest_roomImg,showUploadList:!1}},[a("a-button",{attrs:{type:"primary"},on:{click:function(a){return t.chooseRoom(e)}}},[a("a-icon",{attrs:{type:"upload"}}),t._v("上传图片")],1)],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary"},on:{click:function(a){return t.updateRoomHM(e)}}},[a("a-icon",{attrs:{type:"edit"}}),t._v("更新房间")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定想删除该房间吗？",okText:"确定",cancelText:"取消"},on:{confirm:function(a){return t.deleteRoomHM(e)}}},[a("a-button",{attrs:{type:"danger"}},[a("a-icon",{attrs:{type:"delete"}}),t._v("删除房间")],1)],1)],1)}}],null,!1,2640869085)})],1)]),a("a-tab-pane",{key:"2",attrs:{tab:"优惠策略"}},[a("div",{staticStyle:{width:"100%","text-align":"right",margin:"20px 0"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.showCouponHM()}}},[a("a-icon",{attrs:{type:"plus"}}),t._v("添加策略")],1),a("a-divider"),a("a-table",{attrs:{columns:t.columns3,dataSource:t.couponList,pagination:!0},scopedSlots:t._u([{key:"couponType",fn:function(e){return a("span",{},[a("a-tag",{attrs:{color:"red"}},["1"==e?a("span",[t._v("节日特惠")]):t._e(),"2"==e?a("span",[t._v("多间特惠")]):t._e(),"3"==e?a("span",[t._v("满减优惠")]):t._e(),"4"==e?a("span",[t._v("限时优惠")]):t._e()])],1)}},{key:"action",fn:function(e){return a("span",{},[a("a-popconfirm",{attrs:{title:"确定想删除该优惠策略吗？",okText:"确定",cancelText:"取消"},on:{confirm:function(a){return t.confirmDeleteHotelCoupon(e.id)}}},[a("a-button",{attrs:{type:"danger",size:"small"}},[t._v("删除优惠策略")])],1)],1)}}],null,!1,208980462)})],1)])],1)],1):t._e()])],1),"Manager"==t.userInfo.userType?a("div",{staticClass:"manageHotel-M"},[a("a-tabs",[a("a-tab-pane",{key:"1",attrs:{tab:"酒店管理"}},[a("div",{staticStyle:{width:"100%","text-align":"right",margin:"20px 0"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.addHotel}},[a("a-icon",{attrs:{type:"plus"}}),t._v("添加酒店")],1)],1),a("a-table",{attrs:{columns:t.columns1,dataSource:t.hotelList,bordered:"",pagination:!0},scopedSlots:t._u([{key:"hotelStar",fn:function(e){return a("span",{},[5==e?a("a-tag",{attrs:{color:"red"}},[t._v("五星级")]):t._e(),4==e?a("a-tag",{attrs:{color:"orange"}},[t._v("四星级")]):t._e(),3==e?a("a-tag",{attrs:{color:"cyan"}},[t._v("三星级")]):t._e(),2==e?a("a-tag",{attrs:{color:"purple"}},[t._v("二星级")]):t._e(),1==e?a("a-tag",{attrs:{color:"blue"}},[t._v("一星级")]):t._e()],1)}},{key:"action",fn:function(e){return a("span",{},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.addRoom(e)}}},[t._v("录入房间")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.showCoupon(e)}}},[t._v("优惠策略")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"info",size:"small"},on:{click:function(a){return t.updateHotel(e)}}},[t._v("更新信息")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定想删除该酒店吗？",okText:"确定",cancelText:"取消"},on:{confirm:function(a){return t.deleteThisHotel(e)}}},[a("a-button",{attrs:{type:"danger",size:"small"}},[t._v("删除酒店")])],1)],1)}}],null,!1,3558249653)})],1)],1)],1):t._e(),a("AddHotelModal"),a("UpdateHotelModal"),a("UpdateRoomModal"),a("AddRoomModal"),a("AddCouponModal"),a("Coupon"),a("MAtlas"),a("appeal-review-modal"),a("a-modal",{attrs:{visible:t.briefVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{height:"100%",width:"100%"},attrs:{alt:"example",src:t.roomUrl}})])],1)},i=[],s=(a("c726"),a("d0bf"),a("b784"),a("6a61"),a("2e91")),r=a("d211"),n=a("cf6b"),l=a("e39b"),c=a("9653"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{visible:t.updateRoomModalVisible,title:"更新房间",cancelText:"取消",okText:"确定"},on:{cancel:t.cancel,ok:t.handleSubmit}},[a("a-form",t._b({staticStyle:{"margin-top":"30px"},attrs:{form:t.form}},"a-form",t.formItemLayout,!1),[a("a-form-item",t._b({attrs:{label:"房间类型"}},"a-form-item",t.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roomType",{rules:[{required:!0,message:"请输入房间类型"}]}],expression:"['roomType', { rules: [{ required: true, message: '请输入房间类型' }] }]"}],attrs:{placeholder:"请填写房间类型"}})],1),a("a-form-item",t._b({attrs:{label:"房间数量"}},"a-form-item",t.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roomNum",{rules:[{required:!0,message:"请输入房间数量"}]}],expression:"['roomNum', { rules: [{ required: true, message: '请输入房间数量' }] }]"}],attrs:{placeholder:"请填写房间数量"}})],1),a("a-form-item",t._b({attrs:{label:"房价"}},"a-form-item",t.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{required:!0,message:"请输入房价"}]}],expression:"['price', { rules: [{ required: true, message: '请输入房价' }] }]"}],attrs:{placeholder:"请填写房价"}})],1)],1)],1)},u=[],m={name:"updateRoomModal",data:function(){return{formItemLayout:{labelCol:{xs:{span:12},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}}}},computed:Object(r["a"])({},Object(n["c"])(["updateRoomModalVisible","currentHotelId"])),beforeCreate:function(){this.form=this.$form.createForm(this,{name:"updateRoomModal"})},mounted:function(){},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["d"])(["set_updateRoomModalVisible","set_updateRoomParams"])),Object(n["b"])(["updateRoom"])),{},{cancel:function(){this.set_updateRoomModalVisible(!1)},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFieldsAndScroll((function(t,a){if(!t){var o={roomType:e.form.getFieldValue("roomType"),price:Number(e.form.getFieldValue("price")),total:Number(e.form.getFieldValue("roomNum")),curNum:Number(e.form.getFieldValue("roomNum")),hotelId:e.currentHotelId};console.log(o),e.set_updateRoomParams(o),e.updateRoom()}}))}})},p=m,f=a("c701"),b=Object(f["a"])(p,d,u,!1,null,null,null),h=b.exports,g=a("855c"),v=a("e421"),_=a("88c9"),y=a("4173"),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.atlasVisible?a("a-modal",{attrs:{visible:!0,width:1260,footer:null},on:{cancel:t.handleCancel}},[a("div",{staticClass:"atlas",attrs:{visible:t.atlasVisible}},[a("div",{staticClass:"currentImg"},[null!=t.curHotelImg?a("img",{staticStyle:{height:"420px",width:"640px"},attrs:{slot:"cover",alt:"example",src:t.curHotelImg,referrerPolicy:"no-referrer"},slot:"cover"}):t._e()]),a("div",{staticClass:"brief"},[a("a-tabs",[a("a-tab-pane",{key:"1",attrs:{tab:"酒店官方"}},[a("a-upload",{attrs:{name:"file",multiple:!0,customRequest:t.customRequest,showUploadList:!1}},[a("a-button",{staticStyle:{"margin-left":"300px","margin-bottom":"20px"},attrs:{type:"primary",icon:"cloud-upload",ghost:""}},[t._v(" 上传酒店图片 ")])],1),a("div",{staticClass:"hotelDetailImgs"},t._l(t.hotelImgList,(function(e){return a("div",{key:e.id,staticClass:"imgAndDel"},[!1===e.custom?a("strong",{key:e.id,staticStyle:{"margin-right":"5px",cursor:"pointer"},on:{click:function(a){return t.removeHPic(e.id)}}},[t._v("X")]):t._e(),!1===e.custom?a("img",{key:e.id,staticClass:"imgWindow",attrs:{src:e.imgUrl},on:{click:function(a){return t.handleClick(e.imgUrl)}}}):t._e()])})),0)],1),a("a-tab-pane",{key:"2",attrs:{tab:"用户上传"}},[a("div",{staticClass:"hotelDetailImgs"},t._l(t.userImgList,(function(e){return a("div",{key:e.id,staticClass:"imgAndDel"},[!0===e.custom?a("strong",{staticStyle:{"margin-right":"5px",cursor:"pointer"},on:{click:function(a){return t.removeHPic(e.id)}}},[t._v("X")]):t._e(),!0===e.custom?a("img",{staticClass:"imgWindow",attrs:{src:e.imgUrl},on:{click:function(a){return t.handleClick(e.imgUrl)}}}):t._e()])})),0)])],1)],1)])]):t._e()},H=[],x={name:"MAtlas.vue",data:function(){return{}},computed:Object(r["a"])({},Object(n["c"])(["currentHotelInfo","userId","atlasVisible","imgList","curHotelImg","userImgList","hotelImgList"])),mounted:function(){},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["d"])(["set_currentHotelId","set_atlasVisible","set_curHotelImg"])),Object(n["b"])(["getHotelById","uploadHPic","deleteHPic"])),{},{handleCancel:function(){this.set_atlasVisible(!1)},handleClick:function(t){this.set_curHotelImg(t)},customRequest:function(t){var e=new FormData;e.append("file",t.file),this.uploadHPic(e)},removeHPic:function(t){var e={id:t};this.deleteHPic(e)}})},R=x,C=(a("c94c"),Object(f["a"])(R,I,H,!1,null,"3e44744e",null)),M=C.exports,k=(a("caaf"),[{title:"酒店名",dataIndex:"name"},{title:"商圈",dataIndex:"bizRegion"},{title:"地址",dataIndex:"address"},{title:"酒店星级",dataIndex:"hotelStar",scopedSlots:{customRender:"hotelStar"}},{title:"评分",dataIndex:"rate"},{title:"简介",dataIndex:"description"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}]),w=[{title:"订单号",dataIndex:"id"},{title:"酒店名",dataIndex:"hotelName"},{title:"房型",dataIndex:"roomType",scopedSlots:{customRender:"roomType"}},{title:"入住时间",dataIndex:"checkInDate",scopedSlots:{customRender:"checkInDate"}},{title:"离店时间",dataIndex:"checkOutDate",scopedSlots:{customRender:"checkOutDate"}},{title:"入住人数",dataIndex:"peopleNum"},{title:"房价",dataIndex:"price"},{title:"状态",filters:[{text:"已预订",value:"已预订"},{text:"已撤销",value:"已撤销"},{text:"已入住",value:"已入住"}],onFilter:function(t,e){return e.orderState.includes(t)},scopedSlots:{customRender:"orderState"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],V=[{title:"优惠类型",dataIndex:"couponType",scopedSlots:{customRender:"couponType"}},{title:"优惠卷名",dataIndex:"couponName"},{title:"折扣",dataIndex:"discount"},{title:"优惠简介",dataIndex:"description"},{title:"达标金额",dataIndex:"targetMoney"},{title:"优惠金额",dataIndex:"discountMoney"},{title:"有效起始时间",dataIndex:"startTime"},{title:"有效结束时间",dataIndex:"endTime"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],S=[{title:"图片",dataIndex:"roomImg",key:"roomImg",scopedSlots:{customRender:"roomImg"}},{title:"房型",dataIndex:"roomType",key:"roomType"},{title:"房间数量",key:"curNum",dataIndex:"curNum",scopedSlots:{customRender:"roomNum"}},{title:"房价",key:"price",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],O={name:"manageHotel",data:function(){return{formLayout:"horizontal",pagination:{},columns1:k,columns2:w,columns3:V,columns4:S,form:this.$form.createForm(this,{name:"manageHotel"}),roomUrl:"",briefVisible:!1}},components:{AddCouponModal:v["a"],appealReviewModal:y["a"],AddHotelModal:l["a"],UpdateHotelModal:c["a"],UpdateRoomModal:h,AddRoomModal:g["a"],Coupon:_["a"],MAtlas:M},computed:Object(r["a"])({},Object(n["c"])(["userInfo","orderList","hotelList","couponList","addHotelModalVisible","updateHotelModalVisible","addRoomModalVisible","updateRoomModalVisible","couponVisible","addCouponVisible","currentHotelId","currentHotelInfo","webCoupon","webCouponList","atlasVisible"])),mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getHotelList();case 2:if("HotelManager"!=t.userInfo.userType){e.next=11;break}return e.next=5,t.getHotelByHMId(t.userInfo.id);case 5:return e.next=7,t.getHotelCoupon();case 7:return e.next=9,t.getHotelById();case 9:e.next=18;break;case 11:if("Manager"!=t.userInfo.userType){e.next=18;break}return e.next=14,t.getHotelList();case 14:return e.next=16,t.getWebCouponList();case 16:return e.next=18,console.log(t.webCouponList);case 18:case"end":return e.stop()}}),e)})))()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["d"])(["set_appealReviewOrderId","set_addHotelModalVisible","set_updateHotelModalVisible","set_addRoomModalVisible","set_couponVisible","set_addCouponVisible","set_currentHotelId","set_appealReviewModalVisible","set_appealCreditRechargeimfo","set_addCouponVisible","set_webCoupon","set_currentRoomId","set_updateRoomModalVisible","set_atlasVisible"])),Object(n["b"])(["getHotelByHMId","getHotelList","getHotelCoupon","deleteOrder","getHotelById","getAppealMessageReviewByOID","deleteHotel","getWebCouponList","deleteCoupon","updateHotelImg","updateRoomImg","deleteRoom","deleteHotelCoupon","getUserInfo"])),{},{handleBrief:function(t){this.roomUrl=t,this.briefVisible=!0},handleCancel:function(){this.briefVisible=!1},customRequest_hotelImg:function(t){var e=new FormData;e.append("file",t.file),this.updateHotelImg(e)},customRequest_roomImg:function(t){var e=new FormData;e.append("file",t.file),this.updateRoomImg(e)},chooseRoom:function(t){this.set_currentRoomId(Number(t.id))},addHotel:function(t){this.set_addHotelModalVisible(!0)},updateHotel:function(t){this.set_currentHotelId(Number(t.id)),this.set_updateHotelModalVisible(!0)},updateHotelHM:function(){console.log("1"),this.set_updateHotelModalVisible(!0)},addRoom:function(t){this.set_currentHotelId(t.id),this.set_currentHotelId(Number(t.id)),this.getHotelById(),this.set_addRoomModalVisible(!0)},addRoomHM:function(){this.set_addRoomModalVisible(!0)},updateRoomHM:function(t){this.set_currentRoomId(t.id),this.set_updateRoomModalVisible(!0)},deleteRoomHM:function(t){console.log("del"),this.set_currentRoomId(t.id),this.deleteRoom()},showCoupon:function(t){this.set_currentHotelId(t.id),this.set_couponVisible(!0),this.getHotelCoupon()},showCouponHM:function(){this.set_addCouponVisible(!0)},deleteThisHotel:function(t){this.set_currentHotelId(Number(t.id)),this.deleteHotel()},checkAppeal:function(t){this.set_appealReviewOrderId(Number(t.id)),this.set_appealCreditRechargeimfo({id:t.userId,amount:t.price/5}),this.getAppealMessageReviewByOID(),this.set_appealReviewModalVisible(!0)},comfirmDeleteOrder:function(t){this.deleteOrder(t)},addCoupon:function(){this.set_addCouponVisible(!0),this.set_couponVisible(!1),this.set_webCoupon(!1)},confirmDeleteCoupon:function(t){var e={id:Number(t)};this.deleteCoupon(e)},confirmDeleteHotelCoupon:function(t){var e={id:Number(t)};this.deleteHotelCoupon(e)},showMAtlas:function(){this.set_atlasVisible(!0)}})},T=O,L=(a("c36c"),a("ca06"),Object(f["a"])(T,o,i,!1,null,"bd7b30dc",null));e["default"]=L.exports}}]);
//# sourceMappingURL=chunk-51af741d.6aaaa50c.js.map