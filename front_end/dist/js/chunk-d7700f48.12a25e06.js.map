{"version":3,"sources":["webpack:///./src/views/admin/manageWebCoupon.vue?bc73","webpack:///src/views/admin/manageWebCoupon.vue","webpack:///./src/views/admin/manageWebCoupon.vue?7744","webpack:///./src/views/admin/manageWebCoupon.vue?c6ee","webpack:///./src/views/admin/manageWebCoupon.vue?bfc2","webpack:///./src/views/hotelManager/components/addCoupon.vue?a970","webpack:///src/views/hotelManager/components/addCoupon.vue","webpack:///./src/views/hotelManager/components/addCoupon.vue?bdb9","webpack:///./src/views/hotelManager/components/addCoupon.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","key","attrs","staticStyle","userInfo","userType","on","addCoupon","_v","_e","columns","webCouponList","scopedSlots","_u","fn","text","record","$event","confirmDeleteCoupon","id","staticRenderFns","component","addCouponVisible","cancel","handleSubmit","_b","form","formItemLayout","directives","name","rawName","value","rules","required","message","expression","changeType","disabledDate","targetRoom","targetMoney","vipOrientedChange","model","callback","$$v","targetVIP","slot"],"mappings":"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","file":"js/chunk-d7700f48.12a25e06.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"manageWebCoupon-wrapper\"},[_c('a-tabs',[_c('a-tab-pane',{key:\"1\",attrs:{\"tab\":\"网站优惠策略管理\"}},[_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"right\",\"margin\":\"20px 0\"}},[(_vm.userInfo.userType=='Manager')?_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addCoupon}},[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\"网站优惠策略\")],1):_vm._e()],1),_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.webCouponList,\"bordered\":\"\",\"pagination\":true},scopedSlots:_vm._u([{key:\"couponType\",fn:function(text){return _c('span',{},[_c('a-tag',{attrs:{\"color\":\"red\"}},[(text =='1')?_c('span',[_vm._v(\"节日特惠\")]):_vm._e(),(text =='2')?_c('span',[_vm._v(\"多间特惠\")]):_vm._e(),(text =='3')?_c('span',[_vm._v(\"满减优惠\")]):_vm._e(),(text =='4')?_c('span',[_vm._v(\"限时优惠\")]):_vm._e()])],1)}},{key:\"action\",fn:function(record){return _c('span',{},[_c('a-popconfirm',{attrs:{\"title\":\"确定想删除该优惠策略吗？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":function($event){return _vm.confirmDeleteCoupon(record.id)}}},[_c('a-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"}},[_vm._v(\"删除优惠策略\")])],1)],1)}}])})],1)],1),_c('AddCouponModal')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"manageWebCoupon-wrapper\">\n        <a-tabs>\n         <a-tab-pane tab=\"网站优惠策略管理\" key=\"1\">\n            <div style=\"width: 100%; text-align: right; margin:20px 0\">\n                <a-button v-if = \"userInfo.userType=='Manager'\"  type=\"primary\" @click=\"addCoupon\"><a-icon type=\"plus\" />网站优惠策略</a-button>\n            </div>\n\n            <a-table\n                    :columns=\"columns\"\n                    :dataSource=\"webCouponList\"\n                    bordered\n                    :pagination=\"true\"\n            >\n            <span slot=\"couponType\" slot-scope=\"text\">\n                <a-tag color=\"red\">\n                    <span v-if=\"text =='1'\">节日特惠</span>\n                <span v-if=\"text =='2'\">多间特惠</span>\n                <span v-if=\"text =='3'\">满减优惠</span>\n                <span v-if=\"text =='4'\">限时优惠</span>\n                </a-tag>\n            </span>\n                <span slot=\"action\" slot-scope=\"record\">\n                        <a-popconfirm\n                                title=\"确定想删除该优惠策略吗？\"\n                                @confirm=\"confirmDeleteCoupon(record.id)\"\n                                okText=\"确定\"\n                                cancelText=\"取消\"\n                        >\n                            <a-button type=\"danger\" size=\"small\">删除优惠策略</a-button>\n                        </a-popconfirm>\n                    </span>\n            </a-table>\n\n        </a-tab-pane>\n        </a-tabs>\n        <AddCouponModal></AddCouponModal>\n\n    </div>\n\n</template>\n\n<script>\n    import {mapActions, mapGetters, mapMutations} from \"vuex\";\n    import AddCouponModal from \"../hotelManager/components/addCoupon\";\n    const columns = [\n        {\n            title: '优惠类型',\n            dataIndex: 'couponType',\n            scopedSlots: { customRender:'couponType'},\n        },\n        {\n            title: '优惠卷名',\n            dataIndex: 'couponName',\n        },\n        {\n            title: '折扣',\n            dataIndex: 'discount',\n        },\n        {\n            title: '优惠简介',\n            dataIndex: 'description',\n        },\n        {\n            title: '达标金额',\n            dataIndex: 'targetMoney',\n        },\n        {\n            title: '优惠金额',\n            dataIndex: 'discountMoney',\n        },\n        {\n            title: '有效起始时间',\n            dataIndex: 'startTime',\n        },\n        {\n            title: '有效结束时间',\n            dataIndex: 'endTime',\n        },\n        {\n            title: '操作',\n            key: 'action',\n            scopedSlots: { customRender: 'action' },\n        }\n    ];\n    export default {\n        name: \"manageWebCoupon\",\n        data(){\n            return {\n                columns,\n                form: this.$form.createForm(this, { name: 'manageWebCoupon' }),\n            }\n        },\n        components: {\n            AddCouponModal\n        },\n        computed: {\n            ...mapGetters([\n                'userInfo',\n                'addCouponVisible',\n                'webCoupon',\n                'webCouponList',\n            ]),\n        },\n        async mounted() {\n                await this.getWebCouponList()\n                console.log(this.webCouponList)\n\n        },\n        methods: {\n            ...mapMutations([\n                'set_addCouponVisible',\n                'set_webCoupon'\n            ]),\n            ...mapActions([\n                'getWebCouponList',\n                'deleteCoupon'\n            ]),\n            addCoupon() {\n                this.set_addCouponVisible(true)\n            },\n            confirmDeleteCoupon(id){\n                const data={\n                    id:Number(id)\n                }\n                this.deleteCoupon(data)\n            },\n            confirmDeleteHotelCoupon(id){\n                const data={\n                    id:Number(id)\n                }\n                this.deleteHotelCoupon(data)\n            },\n        }\n    }\n</script>\n\n<style scoped>\n    .manageWebCoupon-wrapper {\n        padding: 50px;\n    }\n    .chart {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin-top: 20px\n    }\n\n\n\n    .ant-tabs-bar {\n        padding-left: 30px;\n    }\n\n\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./manageWebCoupon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./manageWebCoupon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./manageWebCoupon.vue?vue&type=template&id=b50a29a4&scoped=true&\"\nimport script from \"./manageWebCoupon.vue?vue&type=script&lang=js&\"\nexport * from \"./manageWebCoupon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./manageWebCoupon.vue?vue&type=style&index=0&id=b50a29a4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b50a29a4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./manageWebCoupon.vue?vue&type=style&index=0&id=b50a29a4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-modal',{attrs:{\"visible\":_vm.addCouponVisible,\"title\":\"添加优惠策略\",\"cancelText\":\"取消\",\"okText\":\"确定\"},on:{\"cancel\":_vm.cancel,\"ok\":_vm.handleSubmit}},[_c('a-form',_vm._b({staticStyle:{\"margin-top\":\"30px\"},attrs:{\"form\":_vm.form}},'a-form',_vm.formItemLayout,false),[_c('a-form-item',_vm._b({attrs:{\"label\":\"优惠券类型\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                'couponType',\n                { rules: [{ required: true, message: '请选择类型' }] }]),expression:\"[\\n                'couponType',\\n                { rules: [{ required: true, message: '请选择类型' }] }]\"}],on:{\"change\":_vm.changeType}},[_c('a-select-option',{attrs:{\"value\":\"2\"}},[_vm._v(\"多间特惠\")]),_c('a-select-option',{attrs:{\"value\":\"3\"}},[_vm._v(\"满减特惠\")]),_c('a-select-option',{attrs:{\"value\":\"4\"}},[_vm._v(\"限时特惠\")])],1)],1),_c('a-form-item',{attrs:{\"label\":\"券名\"}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['couponName', { rules: [{ required: true, message: '券名' }] }]),expression:\"['couponName', { rules: [{ required: true, message: '券名' }] }]\"}],attrs:{\"placeholder\":\"券名\"}})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"优惠简介\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['description', { rules: [{ required: true, message: '请填写酒店简介' }] }]),expression:\"['description', { rules: [{ required: true, message: '请填写酒店简介' }] }]\"}],attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"请填写优惠简介\"}})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"适用时间\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-range-picker',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                    'date',\n                    {\n                        rules: [{ required: true, message: '请选择适用时间' }]\n                    }\n                ]),expression:\"[\\n                    'date',\\n                    {\\n                        rules: [{ required: true, message: '请选择适用时间' }]\\n                    }\\n                ]\"}],attrs:{\"disabled-date\":_vm.disabledDate,\"show-time\":\"\",\"format\":\"YYYY-MM-DD hh:mm:ss\",\"placeholder\":['开始时间','结束时间']}})],1),(_vm.targetRoom==true)?_c('a-form-item',_vm._b({attrs:{\"label\":\"达标房间数\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['targetRoomNum', { rules: [{ required: true, message: '请填写达标房间数' }] }]),expression:\"['targetRoomNum', { rules: [{ required: true, message: '请填写达标房间数' }] }]\"}],attrs:{\"placeholder\":\"请填写达标房间数\"}})],1):_vm._e(),(_vm.targetMoney==false)?_c('a-form-item',_vm._b({attrs:{\"label\":\"折扣\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['discount', { rules: [{ required: true, message: '折扣' }] }]),expression:\"['discount', { rules: [{ required: true, message: '折扣' }] }]\"}],attrs:{\"placeholder\":\"请填写折扣\"}})],1):_vm._e(),_c('a-form-item',_vm._b({attrs:{\"label\":\"达标金额\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['targetMoney', { rules: [{ required: true, message: '请填写达标金额' }] }]),expression:\"['targetMoney', { rules: [{ required: true, message: '请填写达标金额' }] }]\"}],attrs:{\"placeholder\":\"请填写达标金额\"}})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"优惠金额\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['discountMoney', { rules: [{ required: true, message: '请填写优惠金额' }] }]),expression:\"['discountMoney', { rules: [{ required: true, message: '请填写优惠金额' }] }]\"}],attrs:{\"placeholder\":\"请填写优惠金额\"}})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"仅面向会员\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-switch',{on:{\"click\":_vm.vipOrientedChange},model:{value:(_vm.targetVIP),callback:function ($$v) {_vm.targetVIP=$$v},expression:\"targetVIP\"}},[_c('a-icon',{attrs:{\"slot\":\"checkedChildren\",\"type\":\"check\"},slot:\"checkedChildren\"}),_c('a-icon',{attrs:{\"slot\":\"unCheckedChildren\",\"type\":\"close\"},slot:\"unCheckedChildren\"})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <a-modal\r\n        :visible=\"addCouponVisible\"\r\n        title=\"添加优惠策略\"\r\n        cancelText=\"取消\"\r\n        okText=\"确定\"\r\n        @cancel=\"cancel\"\r\n        @ok=\"handleSubmit\"\r\n    >\r\n        <!-- 这里是添加策略模态框区域，请编写表单 -->\r\n        <a-form :form=\"form\" style=\"margin-top: 30px\" v-bind=\"formItemLayout\">\r\n            <a-form-item label=\"优惠券类型\" v-bind=\"formItemLayout\">\r\n                <a-select\r\n                        v-decorator=\"[\r\n                    'couponType',\r\n                    { rules: [{ required: true, message: '请选择类型' }] }]\"\r\n                        @change=\"changeType\"\r\n                >\r\n                    <a-select-option value=\"2\">多间特惠</a-select-option>\r\n                    <a-select-option value=\"3\">满减特惠</a-select-option>\r\n                    <a-select-option value=\"4\">限时特惠</a-select-option>\r\n                </a-select>\r\n            </a-form-item>\r\n            <a-form-item label=\"券名\">\r\n                <a-input\r\n                        placeholder=\"券名\"\r\n                        v-decorator=\"['couponName', { rules: [{ required: true, message: '券名' }] }]\"\r\n                />\r\n            </a-form-item>\r\n            <a-form-item label=\"优惠简介\" v-bind=\"formItemLayout\">\r\n                <a-input\r\n                        type=\"textarea\"\r\n                        :rows=\"4\"\r\n                        placeholder=\"请填写优惠简介\"\r\n                        v-decorator=\"['description', { rules: [{ required: true, message: '请填写酒店简介' }] }]\"\r\n                />\r\n            </a-form-item>\r\n            <a-form-item v-bind=\"formItemLayout\" label=\"适用时间\">\r\n                <a-range-picker\r\n                        :disabled-date=\"disabledDate\"\r\n                        show-time\r\n                        format=\"YYYY-MM-DD hh:mm:ss\"\r\n                        v-decorator=\"[\r\n                        'date',\r\n                        {\r\n                            rules: [{ required: true, message: '请选择适用时间' }]\r\n                        }\r\n                    ]\"\r\n                        :placeholder=\"['开始时间','结束时间']\"\r\n                />\r\n            </a-form-item>\r\n\r\n            <a-form-item label=\"达标房间数\" v-bind=\"formItemLayout\" v-if=\"targetRoom==true\">\r\n                <a-input\r\n                        placeholder=\"请填写达标房间数\"\r\n                        v-decorator=\"['targetRoomNum', { rules: [{ required: true, message: '请填写达标房间数' }] }]\"\r\n                />\r\n            </a-form-item>\r\n            <a-form-item label=\"折扣\" v-bind=\"formItemLayout\" v-if=\"targetMoney==false\">\r\n                <a-input\r\n                        placeholder=\"请填写折扣\"\r\n                        v-decorator=\"['discount', { rules: [{ required: true, message: '折扣' }] }]\"\r\n                />\r\n            </a-form-item>\r\n            <a-form-item label=\"达标金额\" v-bind=\"formItemLayout\">\r\n                <a-input\r\n                        placeholder=\"请填写达标金额\"\r\n                        v-decorator=\"['targetMoney', { rules: [{ required: true, message: '请填写达标金额' }] }]\"\r\n                />\r\n            </a-form-item>\r\n\r\n            <a-form-item label=\"优惠金额\" v-bind=\"formItemLayout\">\r\n                <a-input\r\n                        placeholder=\"请填写优惠金额\"\r\n                        v-decorator=\"['discountMoney', { rules: [{ required: true, message: '请填写优惠金额' }] }]\"\r\n                />\r\n            </a-form-item>\r\n\r\n            <a-form-item label=\"仅面向会员\" v-bind=\"formItemLayout\">\r\n                <a-switch  @click=\"vipOrientedChange\" v-model=\"targetVIP\">\r\n                    <a-icon slot=\"checkedChildren\" type=\"check\" />\r\n                    <a-icon slot=\"unCheckedChildren\" type=\"close\" />\r\n                </a-switch>\r\n            </a-form-item>\r\n\r\n        </a-form>\r\n    </a-modal>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapMutations, mapActions } from 'vuex'\r\nconst moment = require('moment')\r\nexport default {\r\n    name: 'addCouponModal',\r\n    data() {\r\n        return {\r\n            formItemLayout: {\r\n                labelCol: {\r\n                    xs: { span: 12 },\r\n                    sm: { span: 6 },\r\n                },\r\n                wrapperCol: {\r\n                    xs: { span: 24 },\r\n                    sm: { span: 16 },\r\n                },\r\n            },\r\n            targetMoney: true,\r\n            targetTime: false,\r\n            targetRoom: false,\r\n            targetVIP : false\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            'currentHotelId',\r\n            'addCouponVisible',\r\n            'webCoupon',\r\n            'userInfo'\r\n        ])\r\n    },\r\n    beforeCreate() {\r\n        // 表单名默认为“form”\r\n        this.form = this.$form.createForm(this, { name: 'addCouponModal' });\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n        ...mapMutations([\r\n            'set_addCouponVisible',\r\n        ]),\r\n        ...mapActions([\r\n            // addHotelCoupon：添加酒店策略接口\r\n            'addHotelTargetMoneyCoupon',\r\n            'addHotelTargetRoomCoupon',\r\n            'addHotelTargetTimeCoupon',\r\n        ]),\r\n        cancel() {\r\n            this.set_addCouponVisible(false)\r\n            this.targetVIP = false\r\n        },\r\n        changeType(v){\r\n            if( v == '3') {\r\n                this.targetMoney=true\r\n                this.targetRoom=false\r\n                this.targetTime=false\r\n\r\n            }else if (v=='2'){\r\n                this.targetMoney=false\r\n                this.targetRoom=true\r\n                this.targetTime=false\r\n            }else if(v=='4'){\r\n                this.targetMoney=false\r\n                this.targetRoom=false\r\n                this.targetTime=true\r\n            }\r\n        },\r\n        disabledDate(current) {\r\n            // Can not select days before today and today\r\n            return current && current < moment().startOf('day');\r\n        },\r\n        vipOrientedChange(){\r\n            this.targetVIP = true; //this.targetVIP = ! this.targetVIP无效,只能点一次\r\n        },\r\n        handleSubmit(e) {\r\n            e.preventDefault();\r\n            this.form.validateFieldsAndScroll((err, values) => {\r\n                if (!err) {\r\n\r\n                    let data = {\r\n                        // 这里添加接口参数\r\n                        hotelId: (this.userInfo.userType==='Manager')? 0 :Number(this.currentHotelId),\r\n                        type: this.form.getFieldValue('couponType'),\r\n                        description: this.form.getFieldValue('description'),\r\n                        name: (this.targetVIP === true)? (this.userInfo.userType === 'Manager' ? '网站会员专属' : '酒店会员专属')  :  (this.userInfo.userType === 'Manager'?\"全网站用户共享优惠\":this.form.getFieldValue('couponName')),\r\n                        targetMoney: Number(this.form.getFieldValue('targetMoney')),\r\n                        discountMoney: Number(this.form.getFieldValue('discountMoney')),\r\n                        startTime: moment(this.form.getFieldValue('date')[0]).format('YYYY-MM-DD hh:mm:ss'),\r\n                        endTime: moment(this.form.getFieldValue('date')[1]).format('YYYY-MM-DD hh:mm:ss'),\r\n                        forHotelVip: (this.targetVIP === true)? 1 : 0\r\n                    }\r\n                    if(this.webCoupon){\r\n                        data={\r\n                            hotelId: Number(0),\r\n                            ...data\r\n                        }\r\n                    }\r\n                    console.log(data)\r\n                    if(this.targetRoom){\r\n                        const data1={\r\n                            targetRoom:Number(this.form.getFieldValue('targetRoomNum')),\r\n                            discount:Number(this.form.getFieldValue('discount')),\r\n                            ...data\r\n                        }\r\n                        console.log(data1)\r\n                        this.addHotelTargetRoomCoupon(data1).then(() => {\r\n                            this.form.setFieldsValue({\r\n                                'couponType': '',\r\n                                'description': '',\r\n                                'couponName': '',\r\n                                'targetMoney':'',\r\n                                'date':'',\r\n                                'targetRoomNum':'',\r\n                                'discount':'',\r\n                                'discountMoney':'',\r\n                            })\r\n                        });\r\n                    }\r\n                    if(this.targetTime){\r\n                        const data2={\r\n                            discount:Number(this.form.getFieldValue('discount')),\r\n                            ...data\r\n                        }\r\n                        this.addHotelTargetTimeCoupon(data2).then(() => {\r\n                            this.form.setFieldsValue({\r\n                                'couponType': '',\r\n                                'description': '',\r\n                                'couponName': '',\r\n                                'targetMoney':'',\r\n                                'date':'',\r\n                                'targetRoomNum':'',\r\n                                'discount':'',\r\n                                'discountMoney':'',\r\n                            })\r\n                        });\r\n                    }\r\n                    if(this.targetMoney){\r\n                        this.addHotelTargetMoneyCoupon(data).then(() => {\r\n                            this.form.setFieldsValue({\r\n                                'couponType': '',\r\n                                'description': '',\r\n                                'couponName': '',\r\n                                'targetMoney':'',\r\n                                'date':'',\r\n                                'targetRoomNum':'',\r\n                                'discount':'',\r\n                                'discountMoney':'',\r\n                            })\r\n                        });\r\n                    }\r\n                    this.targetMoney=true\r\n                    this.targetRoom=false\r\n                    this.targetTime=false\r\n                    this.targetVIP = false\r\n                }\r\n            });\r\n        },\r\n    }\r\n}\r\n</script>","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./addCoupon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./addCoupon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addCoupon.vue?vue&type=template&id=7e153756&\"\nimport script from \"./addCoupon.vue?vue&type=script&lang=js&\"\nexport * from \"./addCoupon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}